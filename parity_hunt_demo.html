<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Battleship - Random Game Stream</title>
  <style>
    body {
      margin: 0;
      background-color: #000000;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: Arial, sans-serif;
    }

    .board-wrapper {
      position: relative;
      padding: 16px;
      border-radius: 14px;
      background: radial-gradient(circle at top, #111827, #020617, #000000);
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.9);
    }

    /* 10x10 grid */
    .grid {
      display: grid;
      grid-template-columns: repeat(10, 40px);
      grid-template-rows: repeat(10, 40px);
      gap: 6px;
      background-color: transparent;
    }

    .cell {
      width: 40px;
      height: 40px;
      background-color: #020617; /* deep navy water */
      border-radius: 6px;
      box-sizing: border-box;
      position: relative;
      box-shadow:
        inset 0 0 0 1px #1f2937,
        0 0 10px rgba(15, 23, 42, 0.8);
      transition:
        background-color 0.45s cubic-bezier(0.42, 0, 1, 1),
        box-shadow 0.45s cubic-bezier(0.42, 0, 1, 1),
        transform 0.45s cubic-bezier(0.42, 0, 1, 1);
    }

    /* Miss tiles */
    .cell.miss {
      background-color: #020617;
      box-shadow:
        inset 0 0 0 2px #374151,
        0 0 6px rgba(55, 65, 81, 0.6);
    }

    .cell.miss::after {
      content: "";
      position: absolute;
      inset: 10px;
      border-radius: 50%;
      border: 2px solid #6b7280;
      opacity: 0.9;
      pointer-events: none;
    }

    /* Hit tiles */
    .cell.hit {
      background-color: #f97316;
      box-shadow:
        inset 0 0 0 2px #ffedd5,
        0 0 18px rgba(249, 115, 22, 0.9);
    }

    .cell.hit::after {
      content: "";
      position: absolute;
      inset: 12px;
      border-radius: 50%;
      background: radial-gradient(circle, #fffbeb 0%, #f97316 65%, #7c2d12 100%);
      opacity: 0.95;
      pointer-events: none;
    }

    /* Sunk ship tiles */
    .cell.sunk {
      background-color: #b91c1c;
      box-shadow:
        inset 0 0 0 2px #fee2e2,
        0 0 22px rgba(248, 113, 113, 1);
      transform: translateZ(0) scale(1.03);
    }

    .cell.sunk::before,
    .cell.sunk::after {
      content: "";
      position: absolute;
      left: 10px;
      right: 10px;
      height: 2px;
      background-color: #fee2e2;
      top: 50%;
      transform-origin: center;
      pointer-events: none;
    }

    .cell.sunk::before {
      transform: translateY(-50%) rotate(45deg);
    }

    .cell.sunk::after {
      transform: translateY(-50%) rotate(-45deg);
    }
  </style>
</head>
<body>
  <div class="board-wrapper">
    <div class="grid" id="grid"></div>
  </div>

  <script>
    const grid = document.getElementById('grid');

    const SIZE = 10;
    const cellMatrix = [];
    const shipSizes = [5, 4, 3, 3, 2]; // standard Battleship fleet

    // Build 10x10 grid
    for (let r = 0; r < SIZE; r++) {
      cellMatrix[r] = [];
      for (let c = 0; c < SIZE; c++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.dataset.row = r;
        cell.dataset.col = c;
        grid.appendChild(cell);
        cellMatrix[r][c] = cell;
      }
    }

    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    /**
     * Generate a random Battleship board snapshot:
     * - Place standard fleet
     * - Fire random shots â†’ hits and misses
     * - Promote fully-hit ships to sunk
     */
    function generateRandomBoard() {
      // Internal board states:
      // "empty", "ship", "miss", "hit", "sunk"
      const board = Array.from({ length: SIZE }, () =>
        Array(SIZE).fill("empty")
      );

      const ships = [];

      // Place fleet without overlap
      for (const length of shipSizes) {
        let placed = false;

        while (!placed) {
          const horizontal = Math.random() < 0.5;
          const row = horizontal
            ? randomInt(0, SIZE - 1)
            : randomInt(0, SIZE - length);
          const col = horizontal
            ? randomInt(0, SIZE - length)
            : randomInt(0, SIZE - 1);

          const cells = [];
          let ok = true;

          for (let i = 0; i < length; i++) {
            const r = row + (horizontal ? 0 : i);
            const c = col + (horizontal ? i : 0);
            if (board[r][c] !== "empty") {
              ok = false;
              break;
            }
            cells.push({ r, c });
          }

          if (!ok) continue;

          // Mark ship cells internally
          for (const { r, c } of cells) {
            board[r][c] = "ship";
          }

          ships.push({ cells });
          placed = true;
        }
      }

      // Fire random shots
      const shotsToFire = randomInt(20, 60);
      const shotSet = new Set();

      let attempts = 0;
      while (shotSet.size < shotsToFire && attempts < 5000) {
        attempts++;
        const r = randomInt(0, SIZE - 1);
        const c = randomInt(0, SIZE - 1);
        const key = `${r}-${c}`;
        if (shotSet.has(key)) continue;
        shotSet.add(key);

        if (board[r][c] === "ship") {
          board[r][c] = "hit";
        } else if (board[r][c] === "empty") {
          board[r][c] = "miss";
        }
        // If already hit/miss, we just skip; the shotSet prevents duplicates.
      }

      // Promote fully-hit ships to sunk
      let sunkCount = 0;
      for (const ship of ships) {
        const allHit = ship.cells.every(({ r, c }) => board[r][c] === "hit");
        if (allHit) {
          sunkCount++;
          for (const { r, c } of ship.cells) {
            board[r][c] = "sunk";
          }
        }
      }

      // Guarantee at least one sunk ship so it always looks interesting
      if (sunkCount === 0 && ships.length > 0) {
        const chosen = ships[randomInt(0, ships.length - 1)];
        for (const { r, c } of chosen.cells) {
          if (board[r][c] === "miss") continue; // extremely rare, but be safe
          board[r][c] = "sunk";
        }
      }

      return board;
    }

    function applyBoardToDOM(board) {
      for (let r = 0; r < SIZE; r++) {
        for (let c = 0; c < SIZE; c++) {
          const cell = cellMatrix[r][c];
          const state = board[r][c];

          // Reset state classes
          cell.classList.remove('miss', 'hit', 'sunk');

          // Ship and empty are visually the same (hidden ships)
          if (state === "miss") {
            cell.classList.add('miss');
          } else if (state === "hit") {
            cell.classList.add('hit');
          } else if (state === "sunk") {
            cell.classList.add('sunk');
          }
        }
      }
    }

    function nextRandomGame() {
      const board = generateRandomBoard();
      applyBoardToDOM(board);
    }

    // Start immediately and update every 0.5 seconds
    nextRandomGame();
    setInterval(nextRandomGame, 500);
  </script>
</body>
</html>
